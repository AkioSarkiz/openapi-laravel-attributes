"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createPluginApiRegisterHooks = void 0;
const normalizeClientFilesHook_1 = require("./normalizeClientFilesHook");
const normalizeReturnObjectHook_1 = require("./normalizeReturnObjectHook");
const createPluginApiRegisterHooks = (plugins, hooks) => () => {
    plugins.forEach(({ name: pluginName, alias, define, clientAppEnhanceFiles, clientAppRootComponentFiles, clientAppSetupFiles, ...commonHooks }) => {
        /**
         * hooks that need to be normalized
         */
        if (alias) {
            hooks.alias.add({
                pluginName,
                hook: normalizeReturnObjectHook_1.normalizeReturnObjectHook(alias),
            });
        }
        if (define) {
            hooks.define.add({
                pluginName,
                hook: normalizeReturnObjectHook_1.normalizeReturnObjectHook(define),
            });
        }
        if (clientAppEnhanceFiles) {
            hooks.clientAppEnhanceFiles.add({
                pluginName,
                hook: normalizeClientFilesHook_1.normalizeClientFilesHook(clientAppEnhanceFiles),
            });
        }
        if (clientAppRootComponentFiles) {
            hooks.clientAppRootComponentFiles.add({
                pluginName,
                hook: normalizeClientFilesHook_1.normalizeClientFilesHook(clientAppRootComponentFiles),
            });
        }
        if (clientAppSetupFiles) {
            hooks.clientAppSetupFiles.add({
                pluginName,
                hook: normalizeClientFilesHook_1.normalizeClientFilesHook(clientAppSetupFiles),
            });
        }
        /**
         * common hooks
         */
        Object.entries(commonHooks).forEach(([key, hook]) => {
            if (hooks[key] && hook) {
                hooks[key].add({
                    pluginName,
                    hook,
                });
            }
        });
    });
};
exports.createPluginApiRegisterHooks = createPluginApiRegisterHooks;
